<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;200;300;400;500;600;700;800;900&display=swap">
    <link rel="stylesheet" href="/css/style.css" />
    <style>
      .popup-category{
         display:none;
         position:fixed;
         top: 100px;
         left: 50%;
         transform: translateX(-50%);
         width:250px;
         padding:30px;
         border:1px solid #ededed;
         background:#fff;
         border-radius:10px;
         box-shadow: 0 0 10px 0 rgba(0,0,0,0.2);
      }
    </style>
</head>
<body class="pageinfo">
    <div class="container">
       <h1 class="my-5 py-4 text-center">페이지설정</h1>
       <div class="d-flex justify-content-between my-5">
          <a href="/" class="btn btn-primary">목록</a>
          <div class="btn-group">
             <button class="btn btn-info addCategory">카테고리설정</button>
             <a href="./write" class="btn btn-success">데이터입력</a>
          </div>
       </div>
       <div class="row">
        <!-- loop -->
           {% for rs in row %} 
           <a href="./edit/{{rs.id}}" class="col-4 my-4">
              <div class="card">
                {% for image in rs.img %}
                   <img src="/{{image}}" class="card-img-top" />    
                {% endfor %}
                 <div class="card-body">
                    <h3>{{rs.pagename}}</h3>
                    <h1>{{rs.title}}</h1>
                    <p>{{rs.content}}</p>
                 {% for ani in rs.animated %}
                    <p>{{ani}}</p>
                 {% endfor %}
                 </div>
              </div>
           </a>
           {% endfor %}
        <!-- /loop -->   
       </div>
       <div class="d-flex justify-content-end my-5">
          <a href="./write" class="btn btn-success">데이터입력</a>
       </div>
    </div>

    <div class="popup-category">
      <form name="category-form" action="/portfolio/category-update" method="post">
        <ul id="sortable" class="list-group">
         <!-- loop -->
           <li class="ui-state-default list-group-item py-3 d-flex align-items-center">
             <div class="col-11">
                <input type="text" 
                    name="category" 
                    value="카테고리1" 
                    class="form-control" />
             </div>
             <div class="col-1 text-center">
                <a href="#" class="btn-close"></a>
             </div>
           </li>
         <!-- /loop -->
           
        </ul>
        <div class="d-flex pt-4 justify-content-between">
           <button type="button" class="btn btn-warning closebtn">닫기</button>
           <button type="button" class="btn btn-info addbtn">추가</button>
           <button type="button" class="btn btn-danger">전송</button>
        </div>
        </form>
    </div>
    <script src="//code.jquery.com/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ui-bootstrap/0.5pre/js/jquery-ui-1.9.2.custom.min.js" integrity="sha512-/j/PhXKFsf5Gc8eMuXoUn1tBjDJthhC5kBpOBPlNyANs9vxbJ8DM/gsciQ4ykymnUtHuk0yedLnlpg7DPmjZZg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
       $(function(){

      const popup_update = $('.popup-category').html();   
      const popup_insert = `
          <form name="category-form" action="/portfolio/category-write" method="post">
        <ul class="list-group">
           <li class="ui-state-default list-group-item py-3">
             <input type="text" 
                    name="category" 
                    value="" 
                    class="form-control" />
           </li>
        </ul>
        <div class="d-flex pt-4 justify-content-between">
           <button type="button" class="btn btn-warning closebtn">닫기</button>
           <button type="button" class="btn btn-danger updatebtn">수정</button>
           <button type="button" class="btn btn-info">전송</button>
        </div>
        </form>
    </div>
          `;

         $('.addCategory').click(function(){
            $('.popup-category').fadeIn(400);
         });
       $("#sortable").sortable();

       $(document).on('click', '.closebtn', function(){
         $('.popup-category').fadeOut(400);
       });
       $(document).on('click', '.addbtn', function(){
          $('.popup-category').html(popup_insert);
       });
       $(document).on('click', '.updatebtn', function(){
          $('.popup-category').html(popup_update);
          $("#sortable").sortable();
       });
       })
    </script>
</body>
</html>